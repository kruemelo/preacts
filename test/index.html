<!DOCTYPE html>
<html lang="en">
  <head>
    <script type="importmap">
      {
        "imports": {
          "preacts": "../dist/preacts-browser.js"
        }
      }
    </script>    
  </head>

  <div id="app"></div>

  <script type="module">
    import {
      html,
      render,
      signal,
      useRef,
      useEffect,
      register,
      css,
    } from "preacts";
  
    const Greeting = ({ name = 'World' }) => {
      return html`<p>Hello, ${name}!</p>`;
    };

    register(Greeting, 'x-greeting', ['name'], { shadow: false });

    const count = signal(0);

    function App() {
      const myRef = useRef(null);

      useEffect(() => {
        if (myRef.current) {
          console.log("useEffect", myRef.current);
        }
      }, []);

      return html`
        <div ref=${myRef}>
          <h1>Hello World!</h1>
          <button onClick=${() => (count.value += 1)}>
            Increment with signal
          </button>
          <p>Counter: ${count}</p>
          <x-greeting name="again!" />
        </div>
      `;
    }
    render(html`<${App} />`, document.getElementById("app"));

    // css
    const backgroundColor = "lightgreen";
    const style = css`
      h1 {
        background-color: ${backgroundColor};
      }
    `;

    css.render(style);
  </script>
</html>